!function(t){"use strict";var a=t("body");a.on("click",".js-post-point .point-btn",(function(a){a.preventDefault();var o=t(this),e=o.data("action"),i=o.closest(".js-post-point").data("post_id"),n=t(".js-post-point[data-post_id="+i+"]"),s=n.siblings(".mobile-info");o=n.find(".point-btn[data-action="+e+"]"),i&&(o.attr("disabled","disabled"),n.find(".count").addClass("loading"),o.hasClass("active")?(o.removeClass("active"),t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_point_discard",sub_action:e,id:i},(function(a){var e=t.parseJSON(a);1==e.status&&(n.find(".count .text").text(e.point_count),s.find(".mobile-votes-count").text(e.point_count)),n.find(".count").removeClass("loading"),o.removeAttr("disabled")}))):(n.find(".active").removeClass("active"),o.addClass("active"),t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_point",sub_action:e,id:i},(function(a){var e=t.parseJSON(a);1==e.status&&(n.find(".count .text").text(e.point_count),s.find(".mobile-votes-count").text(e.point_count)),n.find(".count").removeClass("loading"),o.removeAttr("disabled")}))))})),a.on("click",".js-reaction-item .reaction-vote-btn",(function(a){a.preventDefault();var o="disabled",e=t(this);if(!e.hasClass(o)){e.addClass(o),e.parent().addClass("voted");var i=e.closest(".reaction-item").data("reaction_id"),n=e.closest(".reaction-sections"),s=n.data("post_id");s&&i&&t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_reaction_add",post_id:s,reaction_id:i},(function(a){e.removeClass(o);var i=t.parseJSON(a);1==i.status&&n.find(".reaction-item").each((function(){var a=t(this).data("reaction_id"),e=i.reaction_total[a];e&&(t(this).find(".reaction-stat").height(e.height+"%"),t(this).find(".reaction-stat-count").text(e.total));var n=i.reaction_restrictions[a];n&&!1===n.can_react&&t(this).find(".reaction-vote-btn").addClass(o)}))}))}}));var o=localStorage?{get:function(t){var a=localStorage.getItem("_expiration_"+t);return null===a?(localStorage.removeItem(t),!1):(new Date).getTime()>=a?(localStorage.removeItem("_expiration_"+t),localStorage.removeItem(t),!1):localStorage.getItem(t)},set:function(t,a){var o=new Date;localStorage.setItem("_expiration_"+t,o.getTime()+864e5),localStorage.setItem(t,a)}}:{get:function(t){return jQuery.cookie(t)},set:function(t,a){var o=new Date;o.setTime(o.getTime()+864e5),jQuery.cookie(t,a,{expires:o})}};!function(){if(parseInt(boombox_ajax_params.track_view)){var a=t("article.single").data("post-id");if(a){var e,i,n=!1,s=!1,r=parseInt(boombox_ajax_params.track_view_request_cache);if(r>0){var c=o.get(a);c?r<=(c=parseInt(c))?n=!0:o.set(a,c+1):s=!0}if(!n)e=a,i=s,t.post(boombox_ajax_params.ajax_url,{action:"boombox_ajax_track_view",post_id:e},(function(t){t=JSON.parse(t),i&&!1!==t.status&&o.set(a,1)}))}}}()}(jQuery);